($=>{function toggleControlsBasedOnTemplate(template){var templateControls={default:{show:["wc_email_rounded_corners_control","wc_email_box_shadow_spread_control"],hide:[]},"template-one":{show:["wc_email_header_border_container_top_control"],hide:["wc_email_rounded_corners_control"]},"template-two":{show:["wc_email_body_border_color_control"],hide:["wc_email_rounded_corners_control","wc_email_box_shadow_spread_control"]},"template-three":{show:["wc_email_header_color_control"],hide:["wc_email_rounded_corners_control","wc_email_box_shadow_spread_control"]}};$(".customize-control").show(),templateControls[template]&&(templateControls[template].hide&&templateControls[template].hide.forEach(function(controlId){wp.customize.control(controlId).deactivate()}),templateControls[template].show)&&templateControls[template].show.forEach(function(controlId){wp.customize.control(controlId).activate()})}wp.customize.bind("ready",function(){wp.customize("woocommerce_email_template",function(setting){setting.bind(function(value){var template,templateDefaults;toggleControlsBasedOnTemplate(value),(templateDefaults={"template-three":{woocommerce_email_header_text_color:"#32373c",woocommerce_email_body_background_color:"#ffd2d3",woocommerce_email_header_background_color:"#ffd2d3",woocommerce_email_footer_text_color:"#ffffff",woocommerce_email_footer_background_color:"#202020"},"template-two":{woocommerce_email_header_text_color:"#32373c",woocommerce_email_body_background_color:"#ffffff",woocommerce_email_header_background_color:"#ffffff",woocommerce_email_footer_text_color:"#202020",woocommerce_email_footer_background_color:"#ffffff"},"template-one":{woocommerce_email_header_text_color:"#32373c",woocommerce_email_body_background_color:"#ffffff",woocommerce_email_header_background_color:"#ffffff",woocommerce_email_footer_text_color:"#ffffff",woocommerce_email_footer_background_color:"#202020"},default:{woocommerce_email_header_text_color:"#ffffff",woocommerce_email_body_background_color:"#fdfdfd",woocommerce_email_header_background_color:"#557da1",woocommerce_email_footer_text_color:"#ffffff",woocommerce_email_footer_background_color:"#202020"}})[template=value]&&Object.keys(templateDefaults[template]).forEach(function(settingId){wp.customize.has(settingId)&&wp.customize(settingId).set(templateDefaults[template][settingId])})})}),wp.customize("woocommerce_email_header_image_placement",function(setting){setting.bind(function(value){""===value?(wp.customize.control("wc_email_header_image_control").deactivate(),wp.customize.control("wc_email_header_image_alignment_control").deactivate()):(wp.customize.control("wc_email_header_image_control").activate(),wp.customize.control("wc_email_header_image_alignment_control").activate())})}),$(".customize-control").on("click",".reset-to-default",function(e){e.preventDefault();var defaultValue,e=$(this).closest(".customize-control").attr("id").replace("customize-control-","");wp.customize.has(e)&&(defaultValue=(e=wp.customize(e))._value,e.set(defaultValue))});var currentTemplate=wp.customize("woocommerce_email_template").get();currentTemplate&&toggleControlsBasedOnTemplate(currentTemplate)}),wp.customize.bind("ready",function(){wp.customize("woocommerce_email_send_to",function(setting){setting.bind(function(value){var control=wp.customize.control("wc_email_send_to_control");value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)?(control.container.addClass("customize-control-invalid"),setting.notifications.add("invalid_email",new wp.customize.Notification("invalid_email",{type:"error",message:"Please enter a valid email address."}))):(control.container.removeClass("customize-control-invalid"),setting.notifications.remove("invalid_email"))})});var previewToggle=$('<button type="button" class="button button-secondary" id="toggle-live-preview">Toggle Live Preview</button>');$(".wp-full-overlay-sidebar-content").prepend(previewToggle),previewToggle.on("click",function(){var $preview=$("#customize-preview");$preview.hasClass("live-preview-disabled")?($preview.removeClass("live-preview-disabled"),$(this).text("Disable Live Preview")):($preview.addClass("live-preview-disabled"),$(this).text("Enable Live Preview"))})}),wp.customize.bind("ready",function(){wp.customize("woocommerce_email_template",function(setting){wp.customize.section("wc_email_templates").active.bind(function(isActive){})}),wp.customize("woocommerce_email_header_image_placement",function(setting){function toggleHeaderImageControls(value){value?(wp.customize.control("wc_email_header_image_control").activate(),wp.customize.control("wc_email_header_image_alignment_control").activate()):(wp.customize.control("wc_email_header_image_control").deactivate(),wp.customize.control("wc_email_header_image_alignment_control").deactivate())}toggleHeaderImageControls(setting.get()),setting.bind(toggleHeaderImageControls)})})})(jQuery);